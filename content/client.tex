\colorlet{maincolor}{niceblue} % Color section in blue
\section[Client]{Client mit Backbone.js}

\begin{frame}{Architektur}
  \begin{center}
    \input{images/client-arch}
  \end{center}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Backbone}

\begin{Frame}[fragile]{Events in Backbone}
  \begin{center}
    \input{images/events}
  \end{center}
\end{Frame}

\mode
<article>

Unterschiede zwischen Events in Backbone und der klassischen Realisierung
des Ovserver-Patterns in Java:
\begin{compactitem}
  \item Es gibt benannte Ereignisse, damit kann ein zu beobachtendes Objekt
    verschiedenen Mengen von Beobachtern haben, die bei unterschiedlichen
    Situationen benachrichtigt werden.
  \item Events werden nicht vorher registriert, dass heißt, das zu beobachtende
    Objekt ruft einfach \lstinline-trigger- mit dem Namen des Ereignisses auf.
  \item Ein Beobachter muss nicht sich als Objekt mit \lstinline-addListener-
    am zu beobachten Objekt registriert, sondern mit \lstinline-bind-
    eine (seiner) Methoden zusammen mit dem Namen des zu beobachtenden
    Ereignisses an das zu beobachtenden Objekt binden. Es werden also
    Funktionen statt Objekt als Ereignisbehandler übergeben.
\end{compactitem}

\mode
<all>

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{DOM-Manipulation}

\frame{no content}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{REST-Client}

\frame{no content}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Browser-Historie}

\frame{no content}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{StateModel}

\frame{no content}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{FormBuilder}

\frame{no content}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection[AMD]{Asynchronous Module Definition}

\tikzset{
  file index/.style={},
  file main/.style={},
  file model/.style={},
  file view/.style={},
  file template/.style={},
  file selected/.style={
    color=maincolor,
    font=\bfseries,
    execute at end node={\ \raisebox{.7ex}{\tikz[baseline]{\draw (0,0) edge[<-, ultra thick, maincolor] (0.5,0)}}}
  }
}

\begin{frame}{Asynchronous Module Definition mit Require.js}
  \begin{center}
    \input{images/amd-tree}
  \end{center}
\end{frame}

\lstset{basicstyle=\ttfamily\scriptsize}

\begin{frame}[fragile,t]
  \tikzset{file index/.style={file selected}}
  \scalebox{0.5}{\input{images/amd-tree}}
  
  \vskip3ex
  
  \begin{lstlisting}[language=HTML,gobble=4]
    <!DOCTYPE html>
    <html>
      <head>
        <meta charset="utf-8">
        <script data-main="main" src="libs/require.js" />
      </head>
      <body>
        <div id="passat">
          <!-- application template -->
        </div>
      </body>
    </html>
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile,t]
  \tikzset{file main/.style={file selected}}
  \scalebox{0.5}{\input{images/amd-tree}}
  
  \vskip3ex
  
  \begin{lstlisting}[language=JavaScript,gobble=4]
    require.config({
      paths: {
        backbone: 'libs/backbone',
      },
      shim: {
        'backbone': {
          deps: ['underscore', 'jquery'],
          exports: 'Backbone'
        }
      }
    });
    require(['jquery', 'app/app'], function ($, app) {
      $(function () { app.initialize(); });
    });
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile,t]
  \tikzset{file model/.style={file selected}}
  \scalebox{0.5}{\input{images/amd-tree}}
  
  \vskip3ex
  
  \begin{lstlisting}[language=JavaScript,gobble=4]
    define(['backbone'], function (Backbone) {
      var OrderModel = Backbone.Model.extend({
        // methods of order
      });
      return OrderModel;
    });
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile,t]
  \tikzset{file view/.style={file selected}}
  \scalebox{0.5}{\input{images/amd-tree}}
  
  \vskip3ex
  
  \begin{lstlisting}[language=JavaScript,gobble=4]
    define(['jquery', 'backbone',
        'text!app/templates/orders/show.html'],
        function ($, Backbone, template) {
      var OrdersShowView = Backbone.View.extend({
        tagName: 'tr',
        template: _.template(template),
        initialize: function () {
          this.$el.html(this.template(this));
        }
      });
      return OrdersShowView;
    });
  \end{lstlisting}
\end{frame}

\begin{frame}[fragile,t]
  \tikzset{file template/.style={file selected}}
  \scalebox{0.5}{\input{images/amd-tree}}
  
  \vskip3ex
  
  \begin{lstlisting}[language=HTML,gobble=4]
    <h3><%=t('.title') %></h3>
    <dl class="dl-horizontal">
      <%=showLegend(t('.order')) %>
      <%=showText('occasion') %>
    </dl>
  \end{lstlisting}
\end{frame}
